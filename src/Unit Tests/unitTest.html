<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Joint Spike Tests</title>

  <link rel="stylesheet" href="https://code.jquery.com/qunit/qunit-1.22.0.css">
  <script src="qunit.js"></script>

  <script src="sinon.js"></script>
  <script src="sinon-qunit.js"></script>
  <script src="blanket.min.js" ></script>

  <script src="https://apis.google.com/js/api.js"></script>
  <script src="https://www.gstatic.com/realtime/realtime-client-utils.js"></script>
  <script src="../main/jquery.js"></script>
  <script src="../main/lodash.js"></script>
  <script src="../main/backbone.js"></script>
  <script src="../main/joint.js"></script>
  <script src="../main/webix.js"></script>


  <script src="../main/displayData.js"></script>
  <script src="../main/genUI.js"></script>
  <script src="../main/checkcollaballowed.js"></script>
  <script src="../main/collabobjectssetup.js"></script>
  <script src="../main/connectioncheck.js"></script>
  <script src="../main/createobjects.js" data-cover></script>
  <script src="../main/initialzediagram.js"></script>
  <script src="../main/qmlabfileopened.js"></script>
  <script src="../main/qmlabjointclasses.js"></script>

  <script>

  window.onerror = function(){
   return true;
  }

  window.gapi.load('auth:client,drive-realtime,drive-share', start);


  function start() {
    var doc = gapi.drive.realtime.newInMemoryDocument();
    var model = doc.getModel();
    onFileInitialize(model);
    onFileLoaded(doc);
  }
  QUnit.config.collapse = false;

  QUnit.test("Test Stock Creation", function( assert ) {
    var pos = {x: 3, y: 2};
    var newStock = new localNode(pos, "Stock");
    assert.deepEqual(createStock(pos).attributes.position, newStock.attributes.position);

  });

  QUnit.test("Test Link Creation", function( assert ) {
    var pos = {x: 2, y: 3};
    var nConnector = "normal";
    var rConnector = "rounded";
    var sConnector = "smooth";
    var newNLink = new localLink(pos, false, false, false, nConnector);
    var newRLink = new localLink(pos, false, false, false, rConnector);
    var newSLink = new localLink(pos, false, false, false, sConnector);

    assert.deepEqual(createLink(pos, nConnector).attributes, newRLink.attributes);
  });

  Qunit.test("Test Image Creation", function( assert ) {
    var pos = {x: 4, y: 5};
    var pictureURL = "http://i.imgur.com/48dEoHh.jpg"
    var label = "A nice meme"
    var sizeX = 300
    var sizeY = 500
    var newImage = new joint.shapes.QMLab.ImageNode({
			position: { x: pos.x, y: pos.y },
		});
    newImage.setSize(sizeX, sizeY);
    assert.deepEqual(createImage(pos, pictureURL, label, sizeX, sizeY), newImage);

  });


</script>


</head>
<body>

  <div id="qunit"></div>
  <div id="qunit-fixture"></div>


</body>
</html>
